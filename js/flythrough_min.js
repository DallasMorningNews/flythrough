!function(e){e.fn.flythrough=function(a){function t(e){h.children(".flyButton").unbind("click"),e.hasClass("play")===!0?(u++,r(),i()):(u--,r(),l())}function r(){0===u?h.children(".rewind").hide():u===c.frames.length-1?h.children(".play").hide():h.children(".flyButton").show()}function i(){y="play","waypoint"===c.frames[u].type&&(h.children(".imageOverlay").fadeOut(250),h.children(".label").remove(),o[0].play()),c.frames[u+1]<c.frames.length&&"image"===c.frames[u+1].type&&e.preloadImages(c.frames[u+1].imagePath),m()}function n(){o[0].currentTime>=c.frames[u].end&&o[0].paused!==!0&&(o[0].pause(),d(),f(),s())}function l(){y="rewind","waypoint"===c.frames[u].type&&(h.children(".imageOverlay").fadeOut(250),h.children(".label").remove(),d(),f(),o[0].currentTime=c.frames[u].end,s()),m()}function s(){h.children(".flyButton").bind("click",function(){return t(e(this))})}function d(){h.children(".satCredit").fadeIn(250).text(c.frames[u].satCredit),void 0!==c.frames[u].overlayHead&&h.find(".textOverlay h4").html(c.frames[u].overlayHead),void 0!==c.frames[u].overlayText&&h.find(".textOverlay p").html(c.frames[u].overlayText),(void 0!==c.frames[u].overlayHead||void 0!==c.frames[u].overlayText)&&h.children(".textOverlay").fadeIn(250)}function f(){void 0!==c.frames[u].labels&&e.each(c.frames[u].labels,function(e,a){var t="";t+="<span class='label' style='top: "+c.frames[u].labels[e].y+"; left: "+c.frames[u].labels[e].x+";'>",t+=c.frames[u].labels[e].text,t+="</span>",h.append(t)})}function m(){"image"===c.frames[u].type&&(h.children(".satCredit").fadeOut(250),h.children(".textOverlay").fadeOut(250),h.children(".label").remove(),h.find(".imageOverlay img").attr("src",c.frames[u].imagePath).attr("alt",c.frames[u].cutline),void 0!==c.frames[u].cutline&&h.find(".imageOverlay .cutline").html(c.frames[u].cutline),"play"===y&&"image"!==c.frames[u-1].type?h.children(".imageOverlay").fadeIn(250):"rewind"===y&&"image"!==c.frames[u+1].type&&h.children(".imageOverlay").fadeIn(250),o[0].currentTime=c.frames[u].end,s())}var c=e.extend({frames:[]},a);0===c.frames.length&&console.error("Frames must be an array with at least one object.");var o=this.children(".flyVideo"),u=0,h=this,y="";return e.preloadImages=function(){e("<img />").attr("src",arguments[0])},r(),o[0].controls=!1,o[0].addEventListener("timeupdate",n,!1),this.children(".flyButton").bind("click",function(){return t(e(this))}),this.find(".titleButton").click(function(){h.find(".titleCard").remove(),o[0].currentTime=c.frames[u].end,void 0!==c.frames[u].satCredit&&h.children(".satCredit").text(c.frames[u].satCredit),h.find(".play").addClass("buttonHighlight"),setTimeout(function(){h.find(".play").removeClass("buttonHighlight")},2e3),d(),f(),m()}),this}}(jQuery);
